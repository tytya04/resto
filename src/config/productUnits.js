// Конфигурация единиц измерения для различных категорий продуктов
const productUnitsConfig = {
  // Продукты, которые могут продаваться в разных единицах
  multiUnit: {
    // Зелень - может быть кг или пучками (шт)
    'зелень': ['кг', 'шт'],
    'укроп': ['кг', 'шт'],
    'петрушка': ['кг', 'шт'],
    'салат': ['кг', 'шт'],
    'лук зеленый': ['кг', 'шт'],
    'лук зелёный': ['кг', 'шт'],
    'базилик': ['кг', 'шт'],
    'кинза': ['кг', 'шт'],
    'руккола': ['кг', 'шт'],
    'шпинат': ['кг', 'шт'],
    
    // Огурцы - разные виды имеют разные единицы
    'огурцы свежие': ['кг'],
    'огурцы соленые': ['кг', 'шт'], // могут быть в банках
    'огурцы маринованные': ['кг', 'шт'], // могут быть в банках
    'огурцы бочковые': ['кг'],
    'соленья': ['кг'], // все соленья по умолчанию в кг
    
    // Помидоры
    'помидоры': ['кг'],
    'томаты': ['кг'],
    'помидоры черри': ['кг', 'шт'], // могут продаваться упаковками
    
    // Яйца
    'яйца': ['шт'],
    'яйцо': ['шт'],
    
    // Молочные продукты
    'молоко': ['л', 'шт'], // литры или бутылки/пакеты
    'кефир': ['л', 'шт'],
    'сметана': ['кг', 'шт'], // кг или банки
    'творог': ['кг'],
    'сыр': ['кг'],
    
    // Хлеб
    'хлеб': ['шт'],
    'батон': ['шт'],
    'булка': ['шт'],
    
    // Напитки
    'вода': ['л', 'шт'], // литры или бутылки
    'сок': ['л', 'шт'],
    'газировка': ['л', 'шт'],
    
    // Капуста - некоторые виды могут продаваться поштучно
    'капуста пекинская': ['шт', 'кг'],
    'капуста цветная': ['шт', 'кг'],
    'капуста брокколи': ['шт', 'кг']
  },
  
  // Продукты только в килограммах
  onlyKg: [
    'картофель', 'картошка', 'морковь', 'свекла', 'капуста',
    'лук', 'лук репчатый', 'чеснок', 'перец', 'баклажан',
    'кабачок', 'тыква', 'редис', 'редька', 'репа',
    'мясо', 'говядина', 'свинина', 'курица', 'рыба',
    'фарш', 'печень', 'сердце', 'желудок',
    'мука', 'сахар', 'соль', 'крупа', 'рис', 'гречка',
    'макароны', 'спагетти', 'вермишель'
  ],
  
  // Продукты только в штуках
  onlyPcs: [
    'яйца', 'яйцо', 'хлеб', 'батон', 'булка', 'багет',
    'консервы', 'банка', 'бутылка', 'пачка', 'упаковка'
  ],
  
  // Продукты только в литрах
  onlyLiters: [
    'масло растительное', 'масло подсолнечное', 'масло оливковое',
    'уксус', 'соус', 'майонез'
  ]
};

// Функция для определения возможных единиц измерения
function getPossibleUnits(productName) {
  const lowerName = productName.toLowerCase();
  
  // Проверяем в multiUnit
  for (const [key, units] of Object.entries(productUnitsConfig.multiUnit)) {
    if (lowerName.includes(key)) {
      return units;
    }
  }
  
  // Проверяем в onlyKg
  if (productUnitsConfig.onlyKg.some(item => lowerName.includes(item))) {
    return ['кг'];
  }
  
  // Проверяем в onlyPcs
  if (productUnitsConfig.onlyPcs.some(item => lowerName.includes(item))) {
    return ['шт'];
  }
  
  // Проверяем в onlyLiters
  if (productUnitsConfig.onlyLiters.some(item => lowerName.includes(item))) {
    return ['л'];
  }
  
  // По умолчанию предлагаем выбор между кг и шт
  return ['кг', 'шт'];
}

// Функция для определения единицы по умолчанию
function getDefaultUnit(productName) {
  const possibleUnits = getPossibleUnits(productName);
  return possibleUnits[0];
}

module.exports = {
  productUnitsConfig,
  getPossibleUnits,
  getDefaultUnit
};