2025-08-06 17:13:53 [[32minfo[39m]: Bot instance created successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:53 [[32minfo[39m]: Loading nomenclature from Google Sheets... {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:53 [[32minfo[39m]: Attempting to launch bot... {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:53 [[32minfo[39m]: Bot started successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:53 [[32minfo[39m]: Environment: development {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:53 [[32minfo[39m]: Log level: info {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[31merror[39m]: Error loading nomenclature from Google Sheets: error:1E08010C:DECODER routines::unsupported {"service":"restaurant-procurement-bot","library":"DECODER routines","reason":"unsupported","code":"ERR_OSSL_UNSUPPORTED","stack":"Error: error:1E08010C:DECODER routines::unsupported\n    at Sign.sign (node:internal/crypto/sig:131:29)\n    at Object.sign (/home/resto/resto/node_modules/jwa/index.js:166:45)\n    at Object.jwsSign [as sign] (/home/resto/resto/node_modules/jws/lib/sign-stream.js:32:24)\n    at GoogleToken._GoogleToken_requestToken (/home/resto/resto/node_modules/gtoken/build/src/index.js:235:27)\n    at GoogleToken._GoogleToken_getTokenAsyncInner (/home/resto/resto/node_modules/gtoken/build/src/index.js:180:97)\n    at GoogleToken._GoogleToken_getTokenAsync (/home/resto/resto/node_modules/gtoken/build/src/index.js:160:173)\n    at GoogleToken.getToken (/home/resto/resto/node_modules/gtoken/build/src/index.js:110:102)\n    at JWT.refreshTokenNoCache (/home/resto/resto/node_modules/google-auth-library/build/src/auth/jwtclient.js:173:36)\n    at JWT.refreshToken (/home/resto/resto/node_modules/google-auth-library/build/src/auth/oauth2client.js:187:24)\n    at JWT.getRequestMetadataAsync (/home/resto/resto/node_modules/google-auth-library/build/src/auth/oauth2client.js:333:28)"}
2025-08-06 17:13:54 [[31merror[39m]: Failed to initialize GoogleSheetsService: error:1E08010C:DECODER routines::unsupported {"service":"restaurant-procurement-bot","library":"DECODER routines","reason":"unsupported","code":"ERR_OSSL_UNSUPPORTED","stack":"Error: error:1E08010C:DECODER routines::unsupported\n    at Sign.sign (node:internal/crypto/sig:131:29)\n    at Object.sign (/home/resto/resto/node_modules/jwa/index.js:166:45)\n    at Object.jwsSign [as sign] (/home/resto/resto/node_modules/jws/lib/sign-stream.js:32:24)\n    at GoogleToken._GoogleToken_requestToken (/home/resto/resto/node_modules/gtoken/build/src/index.js:235:27)\n    at GoogleToken._GoogleToken_getTokenAsyncInner (/home/resto/resto/node_modules/gtoken/build/src/index.js:180:97)\n    at GoogleToken._GoogleToken_getTokenAsync (/home/resto/resto/node_modules/gtoken/build/src/index.js:160:173)\n    at GoogleToken.getToken (/home/resto/resto/node_modules/gtoken/build/src/index.js:110:102)\n    at JWT.refreshTokenNoCache (/home/resto/resto/node_modules/google-auth-library/build/src/auth/jwtclient.js:173:36)\n    at JWT.refreshToken (/home/resto/resto/node_modules/google-auth-library/build/src/auth/oauth2client.js:187:24)\n    at JWT.getRequestMetadataAsync (/home/resto/resto/node_modules/google-auth-library/build/src/auth/oauth2client.js:333:28)"}
2025-08-06 17:13:54 [[32minfo[39m]: Loaded 445 products from database cache {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Database connection established successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Foreign keys support enabled {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: WAL mode and busy timeout enabled {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Database synchronized successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Database initialization completed {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Database initialized successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[33mwarn[39m]: Google Sheets service running in offline mode {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Loaded 625 synonyms {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Search index updated with 1070 entries {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: ProductMatcher initialized successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: ProductMatcher initialized successfully {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: NotificationService initialized {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: NotificationService initialized {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Initializing OrderSchedulerService... {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Scheduled automatic order submission for restaurant 1 at 21:08 (–ü–Ω,–í—Ç,–°—Ä,–ß—Ç,–ü—Ç) {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Scheduled automatic order submission for restaurant 1 at 00:01 (–°–±,–í—Å) {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: No active schedules found for restaurant 2 {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: OrderSchedulerService initialized with 2 scheduled jobs {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: OrderSchedulerService initialized {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[31merror[39m]: Failed to initialize email service: Invalid login: 535-5.7.8 Username and Password not accepted. For more information, go to
535 5.7.8  https://support.google.com/mail/?p=BadCredentials 38308e7fff4ca-33238272d10sm24092431fa.4 - gsmtp {"service":"restaurant-procurement-bot","code":"EAUTH","response":"535-5.7.8 Username and Password not accepted. For more information, go to\n535 5.7.8  https://support.google.com/mail/?p=BadCredentials 38308e7fff4ca-33238272d10sm24092431fa.4 - gsmtp","responseCode":535,"command":"AUTH PLAIN","stack":"Error: Invalid login: 535-5.7.8 Username and Password not accepted. For more information, go to\n535 5.7.8  https://support.google.com/mail/?p=BadCredentials 38308e7fff4ca-33238272d10sm24092431fa.4 - gsmtp\n    at SMTPConnection._formatError (/home/resto/resto/node_modules/nodemailer/lib/smtp-connection/index.js:809:19)\n    at SMTPConnection._actionAUTHComplete (/home/resto/resto/node_modules/nodemailer/lib/smtp-connection/index.js:1588:34)\n    at SMTPConnection.<anonymous> (/home/resto/resto/node_modules/nodemailer/lib/smtp-connection/index.js:556:26)\n    at SMTPConnection._processResponse (/home/resto/resto/node_modules/nodemailer/lib/smtp-connection/index.js:993:20)\n    at SMTPConnection._onData (/home/resto/resto/node_modules/nodemailer/lib/smtp-connection/index.js:774:14)\n    at SMTPConnection._onSocketData (/home/resto/resto/node_modules/nodemailer/lib/smtp-connection/index.js:195:44)\n    at TLSSocket.emit (node:events:517:28)\n    at addChunk (node:internal/streams/readable:368:12)\n    at readableAddChunk (node:internal/streams/readable:341:9)\n    at Readable.push (node:internal/streams/readable:278:10)"}
2025-08-06 17:13:54 [[33mwarn[39m]: EmailService not configured or failed to initialize {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Health check server started on port 3000 {"service":"restaurant-procurement-bot"}
2025-08-06 17:13:54 [[32minfo[39m]: Health check server started on port 3000 {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:11 [[32minfo[39m]: Received SIGTERM, starting graceful shutdown... {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:11 [[32minfo[39m]: Waiting for ongoing operations to complete... {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Stopping services... {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Stopping all scheduled jobs... {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: OrderSchedulerService stopped {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: GoogleSheetsService stopped {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Health check server stopped {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Health check server stopped {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Bot stopped {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Database connection closed {"service":"restaurant-procurement-bot"}
2025-08-06 17:14:16 [[32minfo[39m]: Graceful shutdown completed {"service":"restaurant-procurement-bot"}
