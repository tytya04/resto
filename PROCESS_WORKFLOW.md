# Процесс работы системы закупок

## Этапы процесса

### 1. Создание и отправка заказов (Ресторан)
- Ресторан создает черновик заказа
- Заказ отправляется вручную или автоматически по расписанию
- Статус заказа: **'sent'**

### 2. Наблюдение и консолидация (Менеджер и Закупщик)
**Менеджер:**
- Получает уведомление о новых заказах
- Может просмотреть список всех отправленных заказов
- Может просмотреть консолидированный список продуктов
- **НЕ обрабатывает заказы на этом этапе, только наблюдает**

**Закупщик:**
- Получает уведомление о новых заказах для консолидации
- Видит консолидированный список всех продуктов со всех заказов
- Использует команду `/consolidate` или `/consolidated_list`
- Осуществляет закупку продуктов
- Формирует корзины для каждого ресторана

### 3. Обработка после закупки (Менеджер)
- После завершения закупки менеджер обрабатывает заказы
- Проставляет отпускные цены для ресторанов
- Одобряет заказы (статус меняется на **'approved'**)
- Ресторан получает уведомление об одобрении с суммой

## Команды

### Для менеджера:
- `/pending_orders` - просмотр отправленных заказов
- `/manager_consolidated` - консолидированный список

### Для закупщика:
- `/consolidate` или `/consolidated_list` - консолидированный список для закупки
- `/purchases` - активные закупки

## Важные моменты

1. **Менеджер на первом этапе только наблюдает** - не требуется одобрение для начала закупки
2. **Закупщик видит все отправленные заказы сразу** - статус 'sent'
3. **Обработка цен происходит после закупки** - когда корзины сформированы